"use strict";app.controller("ApplicationController",["$rootScope","USER_ROLES","AuthService","LAYOUTS",function(a,b,c,d){a.userRoles=b,a.isAuthorized=c.isAuthorized,a.bootstraps=d,a.css=c.getCss(),a.setCss=function(a){c.setCss(a)}}]),app.controller("AuthController",["$scope","$rootScope","AUTH_EVENTS","AuthService",function(a,b,c,d){function e(a,b){switch($("[id$='-message']").text(""),b){case 412:case 422:$.each(a,function(a,b){$("#"+b.property+"-message").text(b.message)});break;case 401:$("#message").html("Usuário ou senha inválidos.")}}a.credentials={username:"",password:""},a.login=function(a){a.username&&a.password?d.login(a).then(function(){b.$broadcast(c.loginSuccess)},function(a){e(a.data,a.status)}):$("#message").html("Preencha os campos usuário e senha.")},a.logout=function(){b.$broadcast(c.logoutSuccess)}}]),app.controller("DashboardController",["$q","$scope","$filter","DashboardService","AlertService","AuthService",function(a,b,c,d,e,f){b.tema="",b.temas=[]}]),app.controller("FabricanteController",["$scope","$filter","$location","$routeParams","FabricanteService","AlertService","$rootScope",function(a,b,c,d,e,f,g){var h=d.id;b("orderBy");a.count=function(){e.count().then(function(b){a.totalServerItems=b},function(a){var b=a[0],c=a[1];401===c&&f.addWithTimeout("warning",b.message)})};var h=d.id,i=c.$$url;"/fabricante"===i&&a.count(),"/fabricante/edit"===i&&(a.fabricante={}),i==="/fabricante/edit/"+h&&e.get(h).then(function(b){a.fabricante=b},function(a){var b=a[0],c=a[1];401===c&&f.addWithTimeout("warning",b.message)}),a.pageChanged=function(){a.fabricantes=[];var b=(a.currentPage-1)*a.itemsPerPage;e.list(b,a.itemsPerPage).then(function(b){a.fabricantes=b},function(a){var b=a[0],c=a[1];401===c&&f.addWithTimeout("warning",b.message)})},a["new"]=function(){c.path("/fabricante/edit")},a.save=function(){$("[id$='-message']").text(""),e.save(a.fabricante).then(function(a){f.addWithTimeout("success","Fabricante salvo com sucesso"),c.path("/fabricante")},function(a){var b=a[0],c=a[1];401===c?f.addWithTimeout("danger","Não foi possível executar a operação"):412===c&&$.each(b,function(a,b){$("#"+b.property+"-message").text(b.message)})})},a["delete"]=function(b){e["delete"](b).then(function(b){f.addWithTimeout("success","Fabricante removido com sucesso"),c.path("/fabricante"),a.count(),a.getPagedDataAsync(a.pagingOptions.pageSize,a.pagingOptions.currentPage)},function(a){var b=a[0],c=a[1];401===c&&f.addWithTimeout("warning",b.message)})},a.edit=function(b){g.fabricanteCurrentPage=a.pagingOptions.currentPage,c.path("/fabricante/edit/"+b)},a.filterOptions={filterText:"",externalFilter:"searchText",useExternalFilter:!0},a.pagingOptions={pageSizes:[15],pageSize:15,currentPage:1},a.setPagingData=function(b,c,d){var e=b.slice((c-1)*d,c*d);a.myData=e,a.totalServerItems=b.length,a.$$phase||a.$apply()},a.getPagedDataAsync=function(b,c){var d,g;"undefined"==typeof a.sortInfo?(d="id",g="asc"):(d=a.sortInfo.fields[0],g=a.sortInfo.directions[0]),setTimeout(function(){var h=(c-1)*b;e.list(d,g,h,b).then(function(b){a.fabricantes=b},function(a){var b=a[0],c=a[1];401===c&&f.addWithTimeout("warning",b.message)})},100)},void 0!=g.fabricanteCurrentPage?(a.getPagedDataAsync(a.pagingOptions.pageSize,g.fabricanteCurrentPage),a.pagingOptions.currentPage=g.fabricanteCurrentPage):a.getPagedDataAsync(a.pagingOptions.pageSize,a.pagingOptions.currentPage),a.$watch("pagingOptions",function(b,c){b!==c&&b.currentPage!==c.currentPage&&a.getPagedDataAsync(a.pagingOptions.pageSize,a.pagingOptions.currentPage)},!0),a.$watch("filterOptions",function(b,c){b!==c&&a.getPagedDataAsync(a.pagingOptions.pageSize,a.pagingOptions.currentPage)},!0),a.$watch("sortInfo",function(b,c){b!==c&&a.getPagedDataAsync(a.pagingOptions.pageSize,a.pagingOptions.currentPage)},!0),a.$on("ngGridEventSorted",function(b,c){a.sortInfo=c}),a.gridOptions={data:"fabricantes",columnDefs:[{field:"id",displayName:"",width:"50"},{field:"year",displayName:"Ano",width:"50"},{field:"make",displayName:"Fabricante"},{field:"model",displayName:"Modelo"},{displayName:"Ação",cellTemplate:'<a ng-show="!currentUser" ng-click="edit(row.entity.id)" class="btn btn-primary btn-xs"><i class="glyphicon glyphicon-eye-open"></i> Visualizar</a>\n                                                 <a ng-show="currentUser" ng-click="edit(row.entity.id)" class="btn btn-success btn-xs"><i class="glyphicon glyphicon-plus-sign"></i> Alterar</a>\n                                                 <a has-roles="ADMINISTRADOR" confirm-button title="Excluir?" confirm-action="delete(row.entity.id)" class="btn btn-danger btn-xs"><i class="glyphicon glyphicon-minus-sign"></i> Excluir</a>',width:"200"}],selectedItems:[],keepLastSelected:!0,sortInfo:a.sortInfo,multiSelect:!1,enablePaging:!0,showFooter:!0,totalServerItems:"totalServerItems",pagingOptions:a.pagingOptions,enableSorting:!0,useExternalSorting:!0,i18n:"pt"},a.$on("$routeChangeStart",function(a,b){-1===b.originalPath.indexOf("fabricante")&&(g.fabricanteCurrentPage=1)})}]),app.controller("SwaggerController",["$scope",function(a){a.isLoading=!0,a.swaggerUrl="api/swagger.json"}]),app.controller("UsuarioController",["$scope","$filter","$location","$routeParams","UsuarioService","AlertService","$rootScope",function(a,b,c,d,e,f,g){var h=d.id;b("orderBy");a.count=function(){e.count().then(function(b){a.totalServerItems=b},function(a){var b=a[0],c=a[1];401===c&&f.addWithTimeout("warning",b.message)})};var h=d.id,i=c.$$url;"/usuario"===i&&a.count(),"/usuario/edit"===i&&(a.usuario={}),i==="/usuario/edit/"+h&&e.get(h).then(function(b){a.usuario=b},function(a){var b=a[0],c=a[1];401===c&&f.addWithTimeout("warning",b.message)}),a.pageChanged=function(){a.usuarios=[];var b=(a.currentPage-1)*a.itemsPerPage;e.list(b,a.itemsPerPage).then(function(b){a.usuarios=b},function(a){var b=a[0],c=a[1];401===c&&f.addWithTimeout("warning",b.message)})},a["new"]=function(){c.path("/usuario/edit")},a.save=function(){$("[id$='-message']").text(""),e.save(a.usuario).then(function(a){f.addWithTimeout("success","Usuario salvo com sucesso"),c.path("/usuario")},function(a){var b=a[0],c=a[1];401===c?f.addWithTimeout("danger","Não foi possível executar a operação"):412===c&&$.each(b,function(a,b){$("#"+b.property+"-message").text(b.message)})})},a["delete"]=function(b){e["delete"](b).then(function(b){f.addWithTimeout("success","Usuario removido com sucesso"),c.path("/usuario"),a.count(),a.getPagedDataAsync(a.pagingOptions.pageSize,a.pagingOptions.currentPage)},function(a){var b=a[0],c=a[1];401===c&&f.addWithTimeout("warning",b.message)})},a.edit=function(b){g.usuarioCurrentPage=a.pagingOptions.currentPage,c.path("/usuario/edit/"+b)},a.filterOptions={filterText:"",externalFilter:"searchText",useExternalFilter:!0},a.pagingOptions={pageSizes:[15],pageSize:15,currentPage:1},a.setPagingData=function(b,c,d){var e=b.slice((c-1)*d,c*d);a.myData=e,a.totalServerItems=b.length,a.$$phase||a.$apply()},a.getPagedDataAsync=function(b,c){var d,g;"undefined"==typeof a.sortInfo?(d="id",g="asc"):(d=a.sortInfo.fields[0],g=a.sortInfo.directions[0]),setTimeout(function(){var h=(c-1)*b;e.list(d,g,h,b).then(function(b){a.usuarios=b},function(a){var b=a[0],c=a[1];401===c&&f.addWithTimeout("warning",b.message)})},100)},void 0!=g.usuarioCurrentPage?(a.getPagedDataAsync(a.pagingOptions.pageSize,g.usuarioCurrentPage),a.pagingOptions.currentPage=g.usuarioCurrentPage):a.getPagedDataAsync(a.pagingOptions.pageSize,a.pagingOptions.currentPage),a.$watch("pagingOptions",function(b,c){b!==c&&b.currentPage!==c.currentPage&&a.getPagedDataAsync(a.pagingOptions.pageSize,a.pagingOptions.currentPage)},!0),a.$watch("filterOptions",function(b,c){b!==c&&a.getPagedDataAsync(a.pagingOptions.pageSize,a.pagingOptions.currentPage)},!0),a.$watch("sortInfo",function(b,c){b!==c&&a.getPagedDataAsync(a.pagingOptions.pageSize,a.pagingOptions.currentPage)},!0),a.$on("ngGridEventSorted",function(b,c){a.sortInfo=c}),a.gridOptions={data:"usuarios",columnDefs:[{field:"id",displayName:"",width:"50"},{field:"name",displayName:"Usuario"},{field:"email",displayName:"Email"},{displayName:"Ação",cellTemplate:'<a ng-show="!currentUser" ng-click="edit(row.entity.id)" class="btn btn-primary btn-xs"><i class="glyphicon glyphicon-eye-open"></i> Visualizar</a>\n                                                 <a ng-show="currentUser" ng-click="edit(row.entity.id)" class="btn btn-success btn-xs"><i class="glyphicon glyphicon-plus-sign"></i> Alterar</a>\n                                                 <a has-roles="ADMINISTRADOR" confirm-button title="Excluir?" confirm-action="delete(row.entity.id)" class="btn btn-danger btn-xs"><i class="glyphicon glyphicon-minus-sign"></i> Excluir</a>',width:"200"}],selectedItems:[],keepLastSelected:!0,sortInfo:a.sortInfo,multiSelect:!1,enablePaging:!0,showFooter:!0,totalServerItems:"totalServerItems",pagingOptions:a.pagingOptions,enableSorting:!0,useExternalSorting:!0,i18n:"pt"},a.$on("$routeChangeStart",function(a,b){-1===b.originalPath.indexOf("usuario")&&(g.usuarioCurrentPage=1)})}]);